<?xml version="1.0" encoding="utf-8"?>
<mx:TabNavigator 
	xmlns:mx="http://www.adobe.com/2006/mxml"
	>
<mx:Script>
	<![CDATA[
		import mx.events.FlexEvent;
		import mx.controls.Button;
	
			private var _styleChanged: Boolean = true;
			
		    override public function styleChanged(styleProp: String):void 
		    {
		    	super.styleChanged(styleProp); 	
		    	
		    	switch (styleProp)
		    	{
		    		case "tabBgGradienOverColors":
		    			_styleChanged = true;
		    			invalidateDisplayList();
		    			break;
		    		case "textColors":
		    			_styleChanged = true;
		    			invalidateDisplayList();
		    			break;
		    		default:	    	
		    	}	      	
		    } 

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
            {
            	
            	super.updateDisplayList(unscaledWidth, unscaledHeight);
            	
            	
            	if (_styleChanged)
            	{
					var tabBgGradienOverColors: Array;
					var textColors: Array;
					
					tabBgGradienOverColors = this.getStyle("tabBgGradienOverColors") as Array;	
					textColors = this.getStyle("textColors") as Array;			

			        var tab:Button;
			        
			        var i:int = 0;
			        var max: int = this.numChildren;	
			        for (i; i < max; i++) 
			        {
						tab = Button( this.getTabAt(i) );
						
						var colorTop: int = tabBgGradienOverColors[i*2];
						var colorBottom: int = tabBgGradienOverColors[(i*2 + 1)];
						tab.setStyle("bgGradientOverColors", [colorTop, colorBottom]);
						tab.setStyle("color", textColors[i]);
						
						var lastTab: Boolean = (i == max - 1);
						tab.setStyle("lastTab", lastTab);      	            		            
			        }    
			        
			        
			        _styleChanged = false;       	
            	
            	}
								
		    
            }
			    		
	]]>
</mx:Script>
     

</mx:TabNavigator>
